spring.datasource.url=jdbc:postgresql://postgres:5432/walletdb
spring.datasource.username=wallet
spring.datasource.password=wallet123
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

spring.flyway.enabled=true

# --------------------
# DATABASE CONFIG
# --------------------
# Optional: fail fast if lock not acquired in 8s (avoids indefinite wait under load).
# spring.datasource.hikari.connection-init-sql=SET lock_timeout = '8s'

# Retry for mutations on lock timeout / deadlock (max attempts, base backoff ms).
wallet.concurrency.retry.max-attempts=3
wallet.concurrency.retry.base-backoff-ms=50

# --------------------
# JPA CONFIG


# --------------------
# SERVER
# --------------------
server.port=8080

# --------------------
# IDEMPOTENCY (optional Redis for distributed / high traffic)
# Validate from Idempotency-Key header (or body); cache check is faster than DB.
# Set to true and configure Redis to use shared cache for idempotency across instances.
# wallet.idempotency.redis.enabled=false
# spring.data.redis.host=localhost
# spring.data.redis.port=6379